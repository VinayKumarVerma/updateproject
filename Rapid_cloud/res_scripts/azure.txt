var express = require('express')
  , multer = require('multer');

var app = express();
var multer  =   require('multer');

var storage =   multer.diskStorage({
	  destination: function (req, file, callback) {
	    callback(null, './uploads');
	  },
	  filename: function (req, file, callback) {
	    callback(null, file.fieldname + '-' + Date.now());
	  }
	});
var upload = multer({ storage : storage}).single('userPhoto');

app.post('/api/photo',function(req,res){
    upload(req,res,function(err) {
        if(err) {
            return res.end("Error uploading file.");
        }
        res.end("File is uploaded");
    });
});

<form id="uploadForm" enctype="multipart/form-data" action="/api/photo" method="post">
<div class="azureD" style="display:none;">
<div class="pull-left">
<label class="labelTemp">Subscription ID</label>
<div class="clickRole addStoTabWid">
<input type="text" id="" placeholder="" style="border:none;width:100%;">	
</div>
</div>
<div class="pull-left">
<label class="labelTemp">Upload .pem file</label>
<div class="clickRole addStoTabWid">
<input type="file" name="userPhoto" id="" placeholder="" style="border:none;width:100%;">
</div>
</div>
<div class="modal-footer">
</br><!--<a class="cancelPoup">Cancel</a>&nbsp;
<button class="redButton">Create</button>-->
<input type="submit" value="Upload Image" name="submit">
</div>
</form>








var storage =   multer.diskStorage({
	  destination: function (req, file, callback) {
	    callback(null, '../public/uploads');
	  },
	  filename: function (req, file, callback) {
	    callback(null, file.fieldname + '-' + Date.now());
	  }
	});
var upload = multer({ storage : storage}).single('userPhoto');

app.post('/api/photo',function(req,res){
    upload(req,res,function(err) {
        if(err) {
            return res.end("Error uploading file.");
        }
        res.end("File is uploaded");
    });
});


app.js
var express = require('express');
var fs = require('fs');
var busboy = require('connect-busboy');

var app = express();

app.use(busboy());

app.post('/fileupload', function(req, res) {
    var fstream;
    console.log(req.filename);
    req.pipe(req.busboy);   
    req.busboy.on('file', function (fieldname, file, filename) {
        console.log("Uploading: " + filename); 
        fstream = fs.createWriteStream(__dirname + '/public/' + filename);
        file.pipe(fstream);
        fstream.on('close', function () {
            res.redirect('back');
        });
    });
});


HTML form is

<form id="uploadForm" enctype="multipart/form-data" action="/fileupload" method="post">
<div class="azureD" style="display:none;">
<div class="pull-left">
<label class="labelTemp">Subscription ID</label>
<div class="clickRole addStoTabWid">
<input type="text" id="" placeholder="" style="border:none;width:100%;">	
</div>
</div>
<div class="pull-left">
<label class="labelTemp">Upload .pem file</label>
<div class="clickRole addStoTabWid">
<input type="file" name="file" id="file" placeholder="" style="border:none;width:100%;">
</div>
</div>
<div class="modal-footer">
</br>
<input type="submit" value="Upload" name="submit">
</div>


Scripts for validating user name and password

$Username = $InputObj.Username 
$Password = $InputObj.Password 
$SecPassword = Convertto-SecureString –String $Password –AsPlainText -Force 
$Credential = New-object System.Management.Automation.PSCredential $Username,$SecPassword 

Add-AzureAccount -Credential $Credential 






















